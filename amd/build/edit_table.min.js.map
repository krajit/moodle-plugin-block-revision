{"version":3,"file":"edit_table.min.js","sources":["../src/edit_table.js"],"sourcesContent":["define(['jquery', 'core/ajax', 'core/notification', 'core/templates'], function($, Ajax, Notification, Templates) {\n    return {\n        init: function() {\n            const courseid = new URLSearchParams(window.location.search).get('courseid');\n\n            Ajax.call([{\n                methodname: 'block_revision_get_all_entries',\n                args: { courseid: parseInt(courseid) },\n                done: function(data) {\n                    Templates.render('block_revision/edittable', data)\n                        .then(html => $('#revision-table-wrapper').html(html));\n                },\n                fail: Notification.exception\n            }]);\n\n            // Handle cell edits (delegate in case table is loaded after DOM ready)\n            $(document).on('blur', 'td.editable', function() {\n                const cell = $(this);\n                const value = cell.text().trim();\n                const field = cell.data('field');\n                const id = cell.closest('tr').data('id');\n\n                Ajax.call([{\n                    methodname: 'block_revision_update_entry',\n                    args: {\n                        id: parseInt(id),\n                        field: field,\n                        value: value\n                    },\n                    done: function(response) {\n                        window.console.log('Updated successfully:', response);\n                    },\n                    fail: Notification.exception\n                }]);\n            });\n        }\n    };\n});\n"],"names":["define","$","Ajax","Notification","Templates","init","courseid","URLSearchParams","window","location","search","get","call","methodname","args","parseInt","done","data","render","then","html","fail","exception","document","on","cell","this","value","text","trim","field","id","closest","response","console","log"],"mappings":"AAAAA,mCAAO,CAAC,SAAU,YAAa,oBAAqB,mBAAmB,SAASC,EAAGC,KAAMC,aAAcC,iBAC5F,CACHC,KAAM,iBACIC,SAAW,IAAIC,gBAAgBC,OAAOC,SAASC,QAAQC,IAAI,YAEjET,KAAKU,KAAK,CAAC,CACPC,WAAY,iCACZC,KAAM,CAAER,SAAUS,SAAST,WAC3BU,KAAM,SAASC,MACXb,UAAUc,OAAO,2BAA4BD,MACxCE,MAAKC,MAAQnB,EAAE,2BAA2BmB,KAAKA,SAExDC,KAAMlB,aAAamB,aAIvBrB,EAAEsB,UAAUC,GAAG,OAAQ,eAAe,iBAC5BC,KAAOxB,EAAEyB,MACTC,MAAQF,KAAKG,OAAOC,OACpBC,MAAQL,KAAKR,KAAK,SAClBc,GAAKN,KAAKO,QAAQ,MAAMf,KAAK,MAEnCf,KAAKU,KAAK,CAAC,CACPC,WAAY,8BACZC,KAAM,CACFiB,GAAIhB,SAASgB,IACbD,MAAOA,MACPH,MAAOA,OAEXX,KAAM,SAASiB,UACXzB,OAAO0B,QAAQC,IAAI,wBAAyBF,WAEhDZ,KAAMlB,aAAamB"}